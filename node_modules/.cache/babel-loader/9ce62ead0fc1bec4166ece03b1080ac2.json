{"ast":null,"code":"import _regeneratorRuntime from\"/Users/randyadams/notes-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/randyadams/notes-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/randyadams/notes-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{PageHeader,ListGroup,ListGroupItem}from\"react-bootstrap\";import{useAppContext}from\"../libs/contextLib\";import{onError}from\"../libs/errorLib\";import\"./Home.css\";import{API}from\"aws-amplify\";import{LinkContainer}from\"react-router-bootstrap\";export default function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useAppContext=useAppContext(),isAuthenticated=_useAppContext.isAuthenticated;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];useEffect(function(){function onLoad(){return _onLoad.apply(this,arguments);}function _onLoad(){_onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _notes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isAuthenticated){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return loadNotes();case 5:_notes=_context.sent;setNotes(_notes);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);onError(_context.t0);case 12:setIsLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return _onLoad.apply(this,arguments);}onLoad();},[isAuthenticated]);function loadNotes(){return API.get(\"notes\",\"/notes\");}function renderNotesList(notes){return[{}].concat(notes).map(function(note,i){return i!==0?/*#__PURE__*/React.createElement(LinkContainer,{key:note.noteId,to:\"/notes/\".concat(note.noteId)},/*#__PURE__*/React.createElement(ListGroupItem,{header:note.content.trim().split(\"\\n\")[0]},\"Created: \"+new Date(note.createdAt).toLocaleString())):/*#__PURE__*/React.createElement(LinkContainer,{key:\"new\",to:\"/notes/new\"},/*#__PURE__*/React.createElement(ListGroupItem,null,/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"b\",null,\"\\uFF0B\"),\" Create a new note\")));});}function renderLander(){return/*#__PURE__*/React.createElement(\"div\",{className:\"lander\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Immortify\"),/*#__PURE__*/React.createElement(\"p\",null,\"Create Your Immortal Avatar\"));}function renderNotes(){return/*#__PURE__*/React.createElement(\"div\",{className:\"notes\"},/*#__PURE__*/React.createElement(PageHeader,null,\"Your Notes\"),/*#__PURE__*/React.createElement(ListGroup,null,!isLoading&&renderNotesList(notes)));}return/*#__PURE__*/React.createElement(\"div\",{className:\"Home\"},isAuthenticated?renderNotes():renderLander());}","map":{"version":3,"sources":["/Users/randyadams/notes-app-client/src/containers/Home.js"],"names":["React","useState","useEffect","PageHeader","ListGroup","ListGroupItem","useAppContext","onError","API","LinkContainer","Home","notes","setNotes","isAuthenticated","isLoading","setIsLoading","onLoad","loadNotes","get","renderNotesList","concat","map","note","i","noteId","content","trim","split","Date","createdAt","toLocaleString","renderLander","renderNotes"],"mappings":"wcAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,aAAhC,KAAqD,iBAArD,CACA,OAASC,aAAT,KAA8B,oBAA9B,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,MAAO,YAAP,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,OAASC,aAAT,KAA8B,wBAA9B,CAEA,cAAe,SAASC,CAAAA,IAAT,EAAgB,eACHT,QAAQ,CAAC,EAAD,CADL,wCACtBU,KADsB,eACfC,QADe,kCAEDN,aAAa,EAFZ,CAErBO,eAFqB,gBAErBA,eAFqB,gBAGKZ,QAAQ,CAAC,IAAD,CAHb,yCAGtBa,SAHsB,eAGXC,YAHW,eAK/Bb,SAAS,CAAC,UAAM,SACCc,CAAAA,MADD,4HACd,iJACOH,eADP,uGAMwBI,CAAAA,SAAS,EANjC,QAMUN,MANV,eAOIC,QAAQ,CAACD,MAAD,CAAR,CAPJ,+EASIJ,OAAO,aAAP,CATJ,QAYEQ,YAAY,CAAC,KAAD,CAAZ,CAZF,oEADc,yCAgBdC,MAAM,GACP,CAjBQ,CAiBN,CAACH,eAAD,CAjBM,CAAT,CAmBA,QAASI,CAAAA,SAAT,EAAqB,CACnB,MAAOT,CAAAA,GAAG,CAACU,GAAJ,CAAQ,OAAR,CAAiB,QAAjB,CAAP,CACD,CAED,QAASC,CAAAA,eAAT,CAAyBR,KAAzB,CAAgC,CAC9B,MAAO,CAAC,EAAD,EAAKS,MAAL,CAAYT,KAAZ,EAAmBU,GAAnB,CAAuB,SAACC,IAAD,CAAOC,CAAP,QAC5BA,CAAAA,CAAC,GAAK,CAAN,cACE,oBAAC,aAAD,EAAe,GAAG,CAAED,IAAI,CAACE,MAAzB,CAAiC,EAAE,kBAAYF,IAAI,CAACE,MAAjB,CAAnC,eACE,oBAAC,aAAD,EAAe,MAAM,CAAEF,IAAI,CAACG,OAAL,CAAaC,IAAb,GAAoBC,KAApB,CAA0B,IAA1B,EAAgC,CAAhC,CAAvB,EACG,YAAc,GAAIC,CAAAA,IAAJ,CAASN,IAAI,CAACO,SAAd,EAAyBC,cAAzB,EADjB,CADF,CADF,cAOE,oBAAC,aAAD,EAAe,GAAG,CAAC,KAAnB,CAAyB,EAAE,CAAC,YAA5B,eACE,oBAAC,aAAD,mBACE,2CACE,6BAAI,QAAJ,CADF,sBADF,CADF,CAR0B,EAAvB,CAAP,CAiBD,CAEC,QAASC,CAAAA,YAAT,EAAwB,CACtB,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,0CADF,cAEE,2DAFF,CADF,CAMD,CAED,QAASC,CAAAA,WAAT,EAAuB,CACrB,mBACE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,UAAD,mBADF,cAEE,oBAAC,SAAD,MACG,CAAClB,SAAD,EAAcK,eAAe,CAACR,KAAD,CADhC,CAFF,CADF,CAQD,CAED,mBACE,2BAAK,SAAS,CAAC,MAAf,EACGE,eAAe,CAAGmB,WAAW,EAAd,CAAmBD,YAAY,EADjD,CADF,CAKD","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { PageHeader, ListGroup, ListGroupItem } from \"react-bootstrap\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport { onError } from \"../libs/errorLib\";\nimport \"./Home.css\";\nimport { API } from \"aws-amplify\";\nimport { LinkContainer } from \"react-router-bootstrap\";\n\nexport default function Home() {\n  const [notes, setNotes] = useState([]);\n  const { isAuthenticated } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n\nuseEffect(() => {\n  async function onLoad() {\n    if (!isAuthenticated) {\n      return;\n    }\n\n    try {\n      const notes = await loadNotes();\n      setNotes(notes);\n    } catch (e) {\n      onError(e);\n    }\n\n    setIsLoading(false);\n  }\n\n  onLoad();\n}, [isAuthenticated]);\n\nfunction loadNotes() {\n  return API.get(\"notes\", \"/notes\");\n}\n\nfunction renderNotesList(notes) {\n  return [{}].concat(notes).map((note, i) =>\n    i !== 0 ? (\n      <LinkContainer key={note.noteId} to={`/notes/${note.noteId}`}>\n        <ListGroupItem header={note.content.trim().split(\"\\n\")[0]}>\n          {\"Created: \" + new Date(note.createdAt).toLocaleString()}\n        </ListGroupItem>\n      </LinkContainer>\n    ) : (\n      <LinkContainer key=\"new\" to=\"/notes/new\">\n        <ListGroupItem>\n          <h4>\n            <b>{\"\\uFF0B\"}</b> Create a new note\n          </h4>\n        </ListGroupItem>\n      </LinkContainer>\n    )\n  );\n}\n\n  function renderLander() {\n    return (\n      <div className=\"lander\">\n        <h1>Immortify</h1>\n        <p>Create Your Immortal Avatar</p>\n      </div>\n    );\n  }\n\n  function renderNotes() {\n    return (\n      <div className=\"notes\">\n        <PageHeader>Your Notes</PageHeader>\n        <ListGroup>\n          {!isLoading && renderNotesList(notes)}\n        </ListGroup>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"Home\">\n      {isAuthenticated ? renderNotes() : renderLander()}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}