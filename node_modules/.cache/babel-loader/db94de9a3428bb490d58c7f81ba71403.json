{"ast":null,"code":"var BufferReader=require('./lib/buffer-reader');var XIPH_LACING=1;var EBML_LACING=3;var FIXED_SIZE_LACING=2;module.exports=function(buffer){var block={};var reader=new BufferReader(buffer);block.trackNumber=reader.nextUIntV();block.timecode=reader.nextInt16BE();var flags=reader.nextUInt8();block.invisible=!!(flags&0x8);// only valid for SimpleBlock\nblock.keyframe=!!(flags&0x80);block.discardable=!!(flags&0x1);var lacing=(flags&0x6)>>1;block.frames=readLacedData(reader,lacing);return block;};function readLacedData(reader,lacing){if(!lacing)return[reader.nextBuffer()];var i,frameSize;var frames=[];var framesNum=reader.nextUInt8()+1;// number of frames\nif(lacing===FIXED_SIZE_LACING){// remaining data should be divisible by the number of frames\nif(reader.length%framesNum!==0)throw new Error('Fixed-Size Lacing Error');frameSize=reader.length/framesNum;for(i=0;i<framesNum;i++){frames.push(reader.nextBuffer(frameSize));}return frames;}var frameSizes=[];if(lacing===XIPH_LACING){for(i=0;i<framesNum-1;i++){var val;frameSize=0;do{val=reader.nextUInt8();frameSize+=val;}while(val===0xff);frameSizes.push(frameSize);}}else if(lacing===EBML_LACING){// first frame\nframeSize=reader.nextUIntV();frameSizes.push(frameSize);// middle frames\nfor(i=1;i<framesNum-1;i++){frameSize+=reader.nextIntV();frameSizes.push(frameSize);}}for(i=0;i<framesNum-1;i++){frames.push(reader.nextBuffer(frameSizes[i]));}// last frame (remaining buffer)\nframes.push(reader.nextBuffer());return frames;}","map":{"version":3,"sources":["/Users/randyadams/IMMORTIFYV2/immortify-app-client/src/react-video-recorder-master/node_modules/ebml-block/index.js"],"names":["BufferReader","require","XIPH_LACING","EBML_LACING","FIXED_SIZE_LACING","module","exports","buffer","block","reader","trackNumber","nextUIntV","timecode","nextInt16BE","flags","nextUInt8","invisible","keyframe","discardable","lacing","frames","readLacedData","nextBuffer","i","frameSize","framesNum","length","Error","push","frameSizes","val","nextIntV"],"mappings":"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","sourcesContent":["var BufferReader = require('./lib/buffer-reader')\n\nvar XIPH_LACING = 1\nvar EBML_LACING = 3\nvar FIXED_SIZE_LACING = 2\n\nmodule.exports = function (buffer) {\n  var block = {}\n  var reader = new BufferReader(buffer)\n\n  block.trackNumber = reader.nextUIntV()\n  block.timecode = reader.nextInt16BE()\n\n  var flags = reader.nextUInt8()\n\n  block.invisible = !!(flags & 0x8)\n\n  // only valid for SimpleBlock\n  block.keyframe = !!(flags & 0x80)\n  block.discardable = !!(flags & 0x1)\n\n  var lacing = (flags & 0x6) >> 1\n\n  block.frames = readLacedData(reader, lacing)\n\n  return block\n}\n\nfunction readLacedData (reader, lacing) {\n  if (!lacing) return [reader.nextBuffer()]\n\n  var i, frameSize\n  var frames = []\n  var framesNum = reader.nextUInt8() + 1 // number of frames\n\n  if (lacing === FIXED_SIZE_LACING) {\n    // remaining data should be divisible by the number of frames\n    if (reader.length % framesNum !== 0) throw new Error('Fixed-Size Lacing Error')\n\n    frameSize = reader.length / framesNum\n    for (i = 0; i < framesNum; i++) {\n      frames.push(reader.nextBuffer(frameSize))\n    }\n    return frames\n  }\n\n  var frameSizes = []\n\n  if (lacing === XIPH_LACING) {\n    for (i = 0; i < framesNum - 1; i++) {\n      var val\n      frameSize = 0\n      do {\n        val = reader.nextUInt8()\n        frameSize += val\n      } while (val === 0xff)\n      frameSizes.push(frameSize)\n    }\n  } else if (lacing === EBML_LACING) {\n    // first frame\n    frameSize = reader.nextUIntV()\n    frameSizes.push(frameSize)\n\n    // middle frames\n    for (i = 1; i < framesNum - 1; i++) {\n      frameSize += reader.nextIntV()\n      frameSizes.push(frameSize)\n    }\n  }\n\n  for (i = 0; i < framesNum - 1; i++) {\n    frames.push(reader.nextBuffer(frameSizes[i]))\n  }\n\n  // last frame (remaining buffer)\n  frames.push(reader.nextBuffer())\n\n  return frames\n}\n"]},"metadata":{},"sourceType":"module"}