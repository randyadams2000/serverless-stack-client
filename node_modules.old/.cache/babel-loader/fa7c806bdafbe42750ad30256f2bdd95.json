{"ast":null,"code":"import _regeneratorRuntime from\"/Users/randyadams/notes-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/randyadams/notes-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/randyadams/notes-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{LinkContainer}from\"react-router-bootstrap\";import{Nav,Navbar,NavItem}from\"react-bootstrap\";import\"./App.css\";import Routes from\"./Routes\";import{AppContext}from\"./libs/contextLib\";import{Auth}from\"aws-amplify\";import{onError}from\"./libs/errorLib\";function App(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuthenticated=_useState2[0],userHasAuthenticated=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isAuthenticating=_useState4[0],setIsAuthenticating=_useState4[1];useEffect(function(){onLoad();},[]);function onLoad(){return _onLoad.apply(this,arguments);}function _onLoad(){_onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Auth.currentSession();case 3:userHasAuthenticated(true);_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);if(_context.t0!=='No current user'){onError(_context.t0);}case 9:setIsAuthenticating(false);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return _onLoad.apply(this,arguments);}function handleLogout(){return _handleLogout.apply(this,arguments);}function _handleLogout(){_handleLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Auth.signOut();case 2:userHasAuthenticated(false);history.push(\"/login\");case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _handleLogout.apply(this,arguments);}return!isAuthenticating&&/*#__PURE__*/React.createElement(\"div\",{className:\"App container\"},/*#__PURE__*/React.createElement(Navbar,{fluid:true,collapseOnSelect:true},/*#__PURE__*/React.createElement(Navbar.Header,null,/*#__PURE__*/React.createElement(Navbar.Brand,null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Immortify\")),/*#__PURE__*/React.createElement(Navbar.Toggle,null)),/*#__PURE__*/React.createElement(Navbar.Collapse,null,/*#__PURE__*/React.createElement(Nav,{pullRight:true},isAuthenticated?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/settings\"},/*#__PURE__*/React.createElement(NavItem,null,\"Settings\")),/*#__PURE__*/React.createElement(NavItem,{onClick:handleLogout},\"Logout\")):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/signup\"},/*#__PURE__*/React.createElement(NavItem,null,\"Signup\")),/*#__PURE__*/React.createElement(LinkContainer,{to:\"/login\"},/*#__PURE__*/React.createElement(NavItem,null,\"Login\")))))),/*#__PURE__*/React.createElement(AppContext.Provider,{value:{isAuthenticated:isAuthenticated,userHasAuthenticated:userHasAuthenticated}},/*#__PURE__*/React.createElement(Routes,null)));}export default App;","map":{"version":3,"sources":["/Users/randyadams/notes-app-client/src/App.js"],"names":["React","useState","useEffect","Link","useHistory","LinkContainer","Nav","Navbar","NavItem","Routes","AppContext","Auth","onError","App","history","isAuthenticated","userHasAuthenticated","isAuthenticating","setIsAuthenticating","onLoad","currentSession","handleLogout","signOut","push"],"mappings":"wcAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,aAAT,KAA8B,wBAA9B,CACA,OAASC,GAAT,CAAcC,MAAd,CAAsBC,OAAtB,KAAqC,iBAArC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,OAASC,IAAT,KAAqB,aAArB,CACA,OAASC,OAAT,KAAwB,iBAAxB,CAEA,QAASC,CAAAA,GAAT,EAAe,CACf,GAAMC,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CADe,cAEiCH,QAAQ,CAAC,KAAD,CAFzC,wCAERc,eAFQ,eAESC,oBAFT,8BAGiCf,QAAQ,CAAC,IAAD,CAHzC,yCAGRgB,gBAHQ,eAGUC,mBAHV,eAIfhB,SAAS,CAAC,UAAM,CACdiB,MAAM,GACP,CAFQ,CAEN,EAFM,CAAT,CAJe,QAQAA,CAAAA,MARA,4HAQf,yKAEUR,CAAAA,IAAI,CAACS,cAAL,EAFV,QAGIJ,oBAAoB,CAAC,IAAD,CAApB,CAHJ,8EAMI,GAAI,cAAM,iBAAV,CAA6B,CAChCJ,OAAO,aAAP,CACI,CARL,OAWEM,mBAAmB,CAAC,KAAD,CAAnB,CAXF,oEARe,iDAsBAG,CAAAA,YAtBA,8IAsBf,+JACQV,CAAAA,IAAI,CAACW,OAAL,EADR,QAEEN,oBAAoB,CAAC,KAAD,CAApB,CACAF,OAAO,CAACS,IAAR,CAAa,QAAb,EAHF,wDAtBe,+CA4Bf,MACE,CAACN,gBAAD,eACE,2BAAK,SAAS,CAAC,eAAf,eACE,oBAAC,MAAD,EAAQ,KAAK,KAAb,CAAc,gBAAgB,KAA9B,eACE,oBAAC,MAAD,CAAQ,MAAR,mBACE,oBAAC,MAAD,CAAQ,KAAR,mBACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,cADF,CADF,cAIE,oBAAC,MAAD,CAAQ,MAAR,MAJF,CADF,cAOE,oBAAC,MAAD,CAAQ,QAAR,mBACE,oBAAC,GAAD,EAAK,SAAS,KAAd,EACGF,eAAe,cACd,qDACE,oBAAC,aAAD,EAAe,EAAE,CAAC,WAAlB,eACE,oBAAC,OAAD,iBADF,CADF,cAIE,oBAAC,OAAD,EAAS,OAAO,CAAEM,YAAlB,WAJF,CADc,cAQd,qDACE,oBAAC,aAAD,EAAe,EAAE,CAAC,SAAlB,eACE,oBAAC,OAAD,eADF,CADF,cAIE,oBAAC,aAAD,EAAe,EAAE,CAAC,QAAlB,eACE,oBAAC,OAAD,cADF,CAJF,CATJ,CADF,CAPF,CADF,cA8BE,oBAAC,UAAD,CAAY,QAAZ,EACE,KAAK,CAAE,CAAEN,eAAe,CAAfA,eAAF,CAAmBC,oBAAoB,CAApBA,oBAAnB,CADT,eAGE,oBAAC,MAAD,MAHF,CA9BF,CAFJ,CAyCC,CACD,cAAeH,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { Nav, Navbar, NavItem } from \"react-bootstrap\";\nimport \"./App.css\";\nimport Routes from \"./Routes\";\nimport { AppContext } from \"./libs/contextLib\";\nimport { Auth } from \"aws-amplify\";\nimport { onError } from \"./libs/errorLib\";\n\nfunction App() {\nconst history = useHistory();\nconst [isAuthenticated, userHasAuthenticated] = useState(false);\nconst [isAuthenticating, setIsAuthenticating] = useState(true);\nuseEffect(() => {\n  onLoad();\n}, []);\n\nasync function onLoad() {\n  try {\n    await Auth.currentSession();\n    userHasAuthenticated(true);\n  }\n  catch(e) {\n    if (e !== 'No current user') {\n\tonError(e);\n    }\n  }\n\n  setIsAuthenticating(false);\n}\n\nasync function handleLogout() {\n  await Auth.signOut();\n  userHasAuthenticated(false);\n  history.push(\"/login\");\n}\n\nreturn (\n  !isAuthenticating && (\n    <div className=\"App container\">\n      <Navbar fluid collapseOnSelect>\n        <Navbar.Header>\n          <Navbar.Brand>\n            <Link to=\"/\">Immortify</Link>\n          </Navbar.Brand>\n          <Navbar.Toggle />\n        </Navbar.Header>\n        <Navbar.Collapse>\n          <Nav pullRight>\n            {isAuthenticated ? (\n              <>\n                <LinkContainer to=\"/settings\">\n                  <NavItem>Settings</NavItem>\n                </LinkContainer>\n                <NavItem onClick={handleLogout}>Logout</NavItem>\n              </>\n            ) : (\n              <>\n                <LinkContainer to=\"/signup\">\n                  <NavItem>Signup</NavItem>\n                </LinkContainer>\n                <LinkContainer to=\"/login\">\n                  <NavItem>Login</NavItem>\n                </LinkContainer>\n              </>\n            )}\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n      <AppContext.Provider\n        value={{ isAuthenticated, userHasAuthenticated }}\n      >\n        <Routes />\n      </AppContext.Provider>\n    </div>\n  )\n);\n\n}\nexport default App;"]},"metadata":{},"sourceType":"module"}